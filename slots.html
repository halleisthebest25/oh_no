<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gamble to Win! - Slots</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: white;
      text-align: center;
      padding: 20px;
    }
    h1 { font-size: 3rem; margin-bottom: 5px; }
    .game {
      margin: 20px auto;
      padding: 20px;
      background: rgba(0,0,0,0.6);
      border-radius: 15px;
      max-width: 600px;
    }
    button, input[type="number"] {
      padding: 10px 20px;
      margin: 10px 5px;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    button:disabled {
      background-color: #999 !important;
      cursor: wait !important;
    }
    button {
      background-color: #e67e22;
      color: white;
    }
    button:hover:enabled {
      background-color: #d35400;
    }
    .slot {
      display: inline-block;
      background: white;
      color: black;
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      font-size: 1.5rem;
      width: 100px;
      height: 50px;
      line-height: 50px;
      font-weight: bold;
      user-select: none;
    }
    #result {
      margin-top: 20px;
      font-size: 1.3rem;
      white-space: pre-wrap;
      min-height: 2em;
    }
    a {
      display: inline-block;
      margin-top: 10px;
      color: #e67e22;
      text-decoration: none;
      font-weight: bold;
    }
    a:hover {
      color: #d35400;
    }
  </style>
</head>
<body>
  <h1>üé∞ Gamble to Win! - Slots</h1>
  <div class="game">
    <p id="money">Current Money: $0</p>
    <label for="betAmount">Enter Your Bet:</label>
    <input type="number" id="betAmount" min="1" value="100" />
    <br/>
    <button id="spinBtn" onclick="pullLever()">üéØ Pull Lever</button>
    <div id="slotsArea">
      <div class="slot" id="slot1">?</div>
      <div class="slot" id="slot2">?</div>
      <div class="slot" id="slot3">?</div>
    </div>
    <div id="result"></div>
    <a href="index.html">‚¨Ö Back to Home</a>
  </div>

  <script>
    const spinBtn = document.getElementById('spinBtn');
    const moneyEl = document.getElementById('money');
    const resultEl = document.getElementById('result');
    const slot1 = document.getElementById('slot1');
    const slot2 = document.getElementById('slot2');
    const slot3 = document.getElementById('slot3');

    // Symbols with probabilities
    // Order matters here; sum must be 100%
    const symbols = [
      {name:'duck', chance:39},
      {name:'chocolate', chance:25},
      {name:'bat', chance:14},
      {name:'pistol', chance:9},
      {name:'smg', chance:5},
      {name:'car', chance:3},
      {name:'atomic', chance:1.95},
      {name:'7', chance:1.16}
    ];

    let money = localStorage.getItem('money') ? parseInt(localStorage.getItem('money')) : 1000;

    function updateMoney() {
      moneyEl.innerText = `Current Money: $${money}`;
      localStorage.setItem('money', money);
    }

    function getBet() {
      const bet = parseInt(document.getElementById('betAmount').value);
      if (isNaN(bet) || bet <= 0) {
        resultEl.innerText = '‚ùó Enter a valid bet amount.';
        return null;
      }
      if (bet > money) {
        resultEl.innerText = '‚ùå Not enough money!';
        return null;
      }
      return bet;
    }

    // Pick one symbol based on weighted chance
    function pickSymbol() {
      let r = Math.random() * 100;
      let cumulative = 0;
      for (let s of symbols) {
        cumulative += s.chance;
        if (r < cumulative) return s.name;
      }
      // fallback (should not happen)
      return symbols[0].name;
    }

    // Check all win combos and return multiplier and name or 0 if none
    function checkWinCombo(slots) {
      const [a,b,c] = slots;

      // Helper functions
      function countSymbol(sym) {
        return slots.filter(s => s === sym).length;
      }

      // 1. Pinata: all duck, chocolate, and bat in any order (2x)
      const pinataSet = ['duck','chocolate','bat'];
      if (pinataSet.every(s => slots.includes(s)) && slots.length === 3) return {mult:2, name:'Pinata'};

      // 2. Flock O Ducks: 3 ducks (3x)
      if (countSymbol('duck') === 3) return {mult:3, name:'Flock O Ducks'};

      // 3. Duck Hunting: 2 ducks + 1 pistol (3x)
      if (countSymbol('duck') === 2 && countSymbol('pistol') === 1) return {mult:3, name:'Duck Hunting'};

      // 4. Serious Duck Hunting: 1 smg + 2 ducks (4x)
      if (countSymbol('smg') === 1 && countSymbol('duck') === 2) return {mult:4, name:'Serious Duck Hunting'};

      // 5. Sweet Tooth: 3 chocolate (4x)
      if (countSymbol('chocolate') === 3) return {mult:4, name:'Sweet Tooth'};

      // 6. Road Kill: 2 ducks + 1 car (6x)
      if (countSymbol('duck') === 2 && countSymbol('car') === 1) return {mult:6, name:'Road Kill'};

      // 7. Meltdown 1: 2 chocolate + 1 atomic (7x)
      if (countSymbol('chocolate') === 2 && countSymbol('atomic') === 1) return {mult:7, name:'Meltdown 1'};

      // 8. Meltdown 2: 2 atomic + 1 chocolate (7x)
      if (countSymbol('atomic') === 2 && countSymbol('chocolate') === 1) return {mult:7, name:'Meltdown 2'};

      // 9. Vandalism: 2 car + 1 bat (8x)
      if (countSymbol('car') === 2 && countSymbol('bat') === 1) return {mult:8, name:'Vandalism'};

      // 10. Vandalism 2: 1 car + 2 bat (8x)
      if (countSymbol('car') === 1 && countSymbol('bat') === 2) return {mult:8, name:'Vandalism 2'};

      // 11. Homerun: 3 bats (8x)
      if (countSymbol('bat') === 3) return {mult:8, name:'Homerun'};

      // 12. Gunfight: 2 smg + 1 pistol (10x)
      if (countSymbol('smg') === 2 && countSymbol('pistol') === 1) return {mult:10, name:'Gunfight'};

      // 13. Gunfight 2: 1 smg + 2 pistol (10x)
      if (countSymbol('smg') === 1 && countSymbol('pistol') === 2) return {mult:10, name:'Gunfight 2'};

      // 14. Driveby: 1 car + 2 pistol or 2 smg (20x)
      if (countSymbol('car') === 1 && (countSymbol('pistol') === 2 || countSymbol('smg') === 2)) return {mult:20, name:'Driveby'};

      // 15. Firing Range: 3 pistol (40x)
      if (countSymbol('pistol') === 3) return {mult:40, name:'Firing Range'};

      // 16. Overkill: 3 smg (200x)
      if (countSymbol('smg') === 3) return {mult:200, name:'Overkill'};

      // 17. Pileup: 3 cars (1000x)
      if (countSymbol('car') === 3) return {mult:1000, name:'Pileup'};

      // 18. Radioactive: 3 atomic (2000x)
      if (countSymbol('atomic') === 3) return {mult:2000, name:'Radioactive'};

      // 19. Jackpot: 3 7 (10000x)
      if (countSymbol('7') === 3) return {mult:10000, name:'JACKPOT'};

      return {mult:0, name:''};
    }

    let spinning = false;

    function pullLever() {
      if (spinning) return; // cooldown
      const bet = getBet();
      if (!bet) return;

      spinning = true;
      spinBtn.disabled = true;
      resultEl.innerText = 'Spinning...';
      money -= bet;
      updateMoney();

      slot1.textContent = '?';
      slot2.textContent = '?';
      slot3.textContent = '?';

      // Simulate spinning animation with timeout, 1 second
      setTimeout(() => {
        const slots = [pickSymbol(), pickSymbol(), pickSymbol()];
        slot1.textContent = slots[0];
        slot2.textContent = slots[1];
        slot3.textContent = slots[2];

        const win = checkWinCombo(slots);

        if (win.mult > 0) {
          const winAmount = bet * win.mult;
          money += winAmount;
          resultEl.innerText = `üéâ You hit "${win.name}" and win $${winAmount}!`;
        } else {
          resultEl.innerText = `üíÄ You lost $${bet}.`;
        }

        updateMoney();
        spinning = false;
        spinBtn.disabled = false;
      }, 1000);
    }

    updateMoney();
  </script>
</body>
</html>
